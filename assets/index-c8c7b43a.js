import{C as P,x as $,c as T,g as c,b as f,k as V,w as p,e,D as G,E as A,G as j,H as M,d as k,F as B,f as s,I as z,t as d,h as H,J,B as Q,K as W,L as X,j as Y}from"./index-898e6ee3.js";import{c as t,a as L,u as U,_ as n,D as Z,b as ee,S as N}from"./sweetalert2.all-156f0bd9.js";import{_ as S,i as te,u as se}from"./FormUploadFile-1956cea3.js";import{M as E}from"./Modal-4afc0395.js";import{i as le}from"./isNil-c75b1b34.js";import"./plugin-vueexport-helper-c27b6911.js";import"./menu-8855fc71.js";const oe={class:"col-12 mb-3"},ne={class:"form-check form-check-inline"},ae=e("label",{class:"form-check-label",for:"typePerson"},"自然人",-1),re={class:"form-check form-check-inline"},ce=e("label",{class:"form-check-label",for:"typeCorporation"},"法人",-1),de={class:"col-12 col-lg-6"},ie={class:"col-12 col-lg-6"},ue={class:"col-12 col-lg-6"},he={class:"col-12 col-lg-6"},_e={class:"col-12"},pe={class:"col-12"},me={class:"col-12 col-lg-6"},be={class:"col-12 col-lg-6"},ve={class:"col-12 col-lg-6"},ye=["src"],fe={class:"col-12 col-lg-6 mt-3 mt-lg-0"},ge=["src"],we={class:"col-12 mt-3"},ke={class:"form-check"},$e=e("label",{class:"form-check-label",for:"useForNucleusAccounting"}," 是否加上核果報帳使用 ",-1),xe={class:"col-12 col-lg-6"},qe={class:"col-12 col-lg-6"},Ce={class:"col-12 col-lg-6"},Ae={class:"col-12 col-lg-6"},Fe={class:"col-12"},Re={class:"col-12 col-lg-6"},je={class:"col-12 col-lg-6"},Se={class:"col-12 mt-3"},Be=["src"],Ie={class:"btn-list text-center mt-5"},De=e("button",{class:"btn btn-md btn-primary",type:"submit"},"確定",-1),Te={__name:"FormModal",props:{reload:{type:Function,required:!0}},setup(F,{expose:x}){const g=P(),h=F,i=$(null),v={type:"person",name:"",email:"",identity:"",phone:"",residenceAddress:"",address:"",bankId:"",bankAccount:"",idCardFront:"",idCardBack:"",useForNucleusAccounting:!1,bankStatement:"",taxId:"",companyAddress:""},u=$(null),C=T(()=>le(c(u))),l=T(()=>{const _={type:t().required("請選擇類型"),email:t().required("請輸入Email").email("請輸入正確email格式"),phone:t().required("請輸入聯絡電話"),bankId:t().required("請輸入收款銀行"),bankAccount:t().required("請輸入收款帳號"),bankStatement:t().required("請上傳銀行影本")};return L().shape({..._,name:t().when("type",{is:"person",then:()=>t().required("請輸入領款人姓名"),otherwise:()=>t().required("請輸入公司名稱")}),identity:t().when("type",{is:"person",then:()=>t().required("請輸入身分證字號"),otherwise:()=>t().notRequired()}),residenceAddress:t().when("type",{is:"person",then:()=>t().required("請輸入戶籍地址"),otherwise:()=>t().notRequired()}),address:t().when("type",{is:"person",then:()=>t().required("請輸入通訊地址"),otherwise:()=>t().notRequired()}),idCardFront:t().when("type",{is:"person",then:()=>t().required("請上傳身分證正面"),otherwise:()=>t().notRequired()}),idCardBack:t().when("type",{is:"person",then:()=>t().required("請上傳身分證反面"),otherwise:()=>t().notRequired()}),taxId:t().when("type",{is:"person",then:()=>t().notRequired(),otherwise:()=>t().required("請輸入統編")}),companyAddress:t().when("type",{is:"person",then:()=>t().notRequired(),otherwise:()=>t().required("請輸入公司地址")})})}),{handleSubmit:q,resetForm:m,values:r,defineField:a}=U({initialValues:v,validationSchema:l}),[o]=a("type"),[w]=a("useForNucleusAccounting");function I(){m({values:{...v,type:o.value}})}const O=async _=>{_?(u.value=_,m({values:_})):m({values:v}),i.value.show()},K=()=>{u.value=void 0,m({values:v,touched:!1})},D=q(async _=>{console.log(_),g.success("成功"),h.reload(),i.value.hide()}),R=_=>te(_)?window.URL.createObjectURL(_):"";return x({show:O}),(_,b)=>(f(),V(E,{ref_key:"modalRef",ref:i,title:C.value?"新增外包商":"編輯外包商","hide-footer":!0,dialogClass:"modal-lg","modal-hide":K},{default:p(()=>[e("form",{class:"row",onSubmit:b[4]||(b[4]=G((...y)=>c(D)&&c(D)(...y),["prevent"]))},[e("div",oe,[e("div",ne,[A(e("input",{class:"form-check-input",type:"radio",id:"typePerson",value:"person",onChange:I,"onUpdate:modelValue":b[0]||(b[0]=y=>j(o)?o.value=y:null)},null,544),[[M,c(o)]]),ae]),e("div",re,[A(e("input",{class:"form-check-input",type:"radio",id:"typeCorporation",onChange:I,value:"corporation","onUpdate:modelValue":b[1]||(b[1]=y=>j(o)?o.value=y:null)},null,544),[[M,c(o)]]),ce])]),c(r).type==="person"?(f(),k(B,{key:0},[e("div",de,[s(n,{name:"name",label:"領款人姓名",required:"",placeholder:"請輸入"})]),e("div",ie,[s(n,{name:"identity",label:"身分證字號",required:"",placeholder:"請輸入"})]),e("div",ue,[s(n,{name:"email",label:"Email",required:"",placeholder:"請輸入"})]),e("div",he,[s(n,{name:"phone",label:"聯絡電話",required:"",placeholder:"請輸入"})]),e("div",_e,[s(n,{name:"residenceAddress",label:"戶籍地址",required:"",placeholder:"請輸入"})]),e("div",pe,[s(n,{name:"address",label:"通訊地址",required:"",placeholder:"請輸入"})]),e("div",me,[s(n,{name:"bankId",label:"收款銀行",required:"",placeholder:"請輸入"})]),e("div",be,[s(n,{name:"bankAccount",label:"收款帳號",required:"",placeholder:"請輸入"})]),e("div",ve,[s(S,{name:"idCardFront",label:"身分證正面",required:"",placeholder:"請輸入",btnText:"上傳身分證正面",accept:".jpg,.png,.jpeg"},{img:p(()=>[e("img",{src:R(c(r).idCardFront)},null,8,ye)]),_:1})]),e("div",fe,[s(S,{name:"idCardBack",label:"身分證反面",required:"",placeholder:"請輸入",btnText:"上傳身分證反面",accept:".jpg,.png,.jpeg"},{img:p(()=>[e("img",{src:R(c(r).idCardBack)},null,8,ge)]),_:1})]),e("div",we,[e("div",ke,[A(e("input",{class:"form-check-input",type:"checkbox",id:"useForNucleusAccounting","onUpdate:modelValue":b[2]||(b[2]=y=>j(w)?w.value=y:null)},null,512),[[z,c(w)]]),$e])])],64)):(f(),k(B,{key:1},[e("div",xe,[s(n,{name:"name",label:"公司名稱",required:"",placeholder:"請輸入"})]),e("div",qe,[s(n,{name:"taxId",label:"統編",required:"",placeholder:"請輸入"})]),e("div",Ce,[s(n,{name:"email",label:"Email",required:"",placeholder:"請輸入"})]),e("div",Ae,[s(n,{name:"phone",label:"聯絡電話",required:"",placeholder:"請輸入"})]),e("div",Fe,[s(n,{name:"companyAddress",label:"公司地址",required:"",placeholder:"請輸入"})]),e("div",Re,[s(n,{name:"bankId",label:"收款銀行",required:"",placeholder:"請輸入"})]),e("div",je,[s(n,{name:"bankAccount",label:"收款帳號",required:"",placeholder:"請輸入"})])],64)),e("div",Se,[s(S,{name:"bankStatement",label:"銀行影本",required:"",placeholder:"請輸入",btnText:"上傳銀行影本",accept:".jpg,.png,.jpeg,.pdf"},{img:p(()=>[e("img",{src:R(c(r).bankStatement)},null,8,Be)]),_:1})]),e("div",Ie,[e("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:b[3]||(b[3]=y=>i.value.hide())},"取消"),De])],32)]),_:1},8,["title"]))}},Me={key:0,class:"table-responsive",style:{"overflow-y":"hidden"}},Ne={key:0,class:"table mb-0 border-top table-bordered text-nowrap rounded"},Ve=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),Ge=e("th",{class:"w-25"},"專案名稱",-1),Le=e("th",{class:"w-25"},"領款人姓名",-1),Ue=e("th",{class:"w-25"},"身分證字號",-1),Ee=e("th",{class:"w-25"},"聯絡電話",-1),Oe=e("th",{class:"w-25"},"戶籍地址",-1),Ke=e("th",{class:"w-25"},"通訊地址",-1),Pe=e("th",{class:"w-25"},"是否加上核果報帳使用",-1),ze=e("th",{class:"w-25"},"銀行匯款帳號",-1),He=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),Je=e("th",{class:"w-25"},"支付金額",-1),Qe=e("span",{class:"input-group-text"},"新臺幣",-1),We=e("span",{class:"input-group-text"},"元",-1),Xe=e("tr",null,[e("th",{class:"w-25"},"所得類別"),e("td",null,"薪資所得(50)")],-1),Ye=e("tr",null,[e("th",{class:"w-25"},"-代扣所得稅 5 %"),e("td",null," 新臺幣 0 元 ")],-1),Ze=e("tr",null,[e("th",{class:"w-25"},"-健保補充費 2.11 %"),e("td",null," 新臺幣 16,000 元 ")],-1),et=e("tr",null,[e("th",{class:"w-25"},"=支領淨額"),e("td",null," 新臺幣 0 元 ")],-1),tt=e("tr",null,[e("th",{class:"w-25"},"支付方式"),e("td",null,"匯款")],-1),st=e("th",{class:"w-25"},"收款日期",-1),lt=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"身分證正反面影本")],-1),ot=e("tr",null,[e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (正面) ")]),e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (反面) ")])],-1),nt=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"銀行影本")],-1),at=e("tr",null,[e("td",{colspan:"2"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (銀行影本) ")])],-1),rt={key:1,class:"table mb-0 border-top table-bordered text-nowrap rounded"},ct=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),dt=e("th",{class:"w-25"},"專案名稱",-1),it=e("th",{class:"w-25"},"公司名稱",-1),ut=e("th",{class:"w-25"},"統編",-1),ht=e("th",{class:"w-25"},"聯絡電話",-1),_t=e("th",{class:"w-25"},"公司地址",-1),pt=e("th",{class:"w-25"},"銀行匯款帳號",-1),mt=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),bt=e("th",{class:"w-25"},"支付金額",-1),vt=e("span",{class:"input-group-text"},"新臺幣",-1),yt=e("span",{class:"input-group-text"},"元",-1),ft=e("tr",null,[e("th",{class:"w-25"},"-營業稅(5%)"),e("td",null," 新臺幣 0 元 ")],-1),gt=e("tr",null,[e("th",{class:"w-25"},"=支領淨額"),e("td",null," 新臺幣 0 元 ")],-1),wt=e("tr",null,[e("th",{class:"w-25"},"支付方式"),e("td",null,"匯款")],-1),kt=e("th",{class:"w-25"},"收款日期",-1),$t=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"銀行影本")],-1),xt=e("tr",null,[e("td",{colspan:"2"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (銀行影本) ")])],-1),qt=e("div",{class:"btn-list text-center mt-5"},[e("button",{class:"btn btn-md btn-primary",type:"submit"}," 確認寄出 ")],-1),Ct={__name:"SendInfoModal",setup(F,{expose:x}){const g={date:""},h=$(null),{handleSubmit:i,resetForm:v,defineField:u,errors:C}=U({initialValues:g,validationSchema:L().shape({})}),l=$(null),q=async r=>{r&&(l.value=r,v({values:r})),h.value.show()},m=i(r=>{console.log(r),h.value.hide()});return x({show:q}),(r,a)=>(f(),V(E,{ref_key:"modalRef",ref:h,title:"寄送勞報單","hide-footer":!0,dialogClass:" modal-lg  modal-dialog-scrollable"},{default:p(()=>[e("form",{class:"row",onSubmit:a[0]||(a[0]=G((...o)=>c(m)&&c(m)(...o),["prevent"]))},[l.value?(f(),k("div",Me,[l.value.type==="person"?(f(),k("table",Ne,[e("tbody",null,[Ve,e("tr",null,[Ge,e("td",null,[s(n,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),e("tr",null,[Le,e("td",null,d(l.value.name),1)]),e("tr",null,[Ue,e("td",null,d(l.value.identity),1)]),e("tr",null,[Ee,e("td",null,d(l.value.phone),1)]),e("tr",null,[Oe,e("td",null,d(l.value.residenceAddress),1)]),e("tr",null,[Ke,e("td",null,d(l.value.address),1)]),e("tr",null,[Pe,e("td",null,d(l.value.useForNucleusAccounting?"是":"否"),1)]),e("tr",null,[ze,e("td",null,d(l.value.bankId)+" - "+d(l.value.bankAccount),1)]),He,e("tr",null,[Je,e("td",null,[s(n,{name:"project",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:p(()=>[Qe]),iconRight:p(()=>[We]),_:1})])]),Xe,Ye,Ze,et,tt,e("tr",null,[st,e("td",null,[s(n,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),lt,ot,nt,at])])):(f(),k("table",rt,[e("tbody",null,[ct,e("tr",null,[dt,e("td",null,[s(n,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),e("tr",null,[it,e("td",null,d(l.value.name),1)]),e("tr",null,[ut,e("td",null,d(l.value.taxTd),1)]),e("tr",null,[ht,e("td",null,d(l.value.phone),1)]),e("tr",null,[_t,e("td",null,d(l.value.companyAddress),1)]),e("tr",null,[pt,e("td",null,d(l.value.bankId)+" - "+d(l.value.bankAccount),1)]),mt,e("tr",null,[bt,e("td",null,[s(n,{name:"project",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:p(()=>[vt]),iconRight:p(()=>[yt]),_:1})])]),ft,gt,wt,e("tr",null,[kt,e("td",null,[s(n,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),$t,xt])])),qt])):H("",!0)],32)]),_:1},512))}},At={class:"row row-sm"},Ft={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},Rt={class:"card custom-card"},jt={class:"card-header border-bottom-0 pb-0"},St={class:"row"},Bt={class:"col-12"},It={class:"d-flex flex-column flex-lg-row justify-content-between"},Dt={class:"input-group wd-lg-25p"},Tt={class:"input-group-append"},Mt={class:"card-body"},Nt={class:"d-flex"},Vt=["onClick"],Gt=["onClick"],Lt=["onClick"],Ut="外包商管理",Qt={__name:"index",setup(F){const{getOutsourcers:x,outsourcerList:g,pagination:h}=se(),i=J({keyword:"",sort:"desc",orderBy:"createDate"});Q(()=>{u(1)});const v=[{key:"type",label:"法人"},{key:"name",label:"姓名",sort:!0},{key:"email",label:"email",sort:!0},{key:"phone",label:"聯絡電話",sort:!0},{key:"bankId",label:"銀行行號",sort:!0},{key:"bankAccount",label:"銀行帳號",sort:!0},{key:"action",label:"Action"}],u=async(r=1,a=10)=>{let o={page:r,limit:a,...i};await x(o)},C=(r="createTime",a="desc")=>{i.orderBy=r,i.sort=a,u(1,h.value.size)},l=$(null),q=r=>{N.fire({title:"Are you sure?",text:`刪除外包商「${r.name}」？`,type:"warning",showCancelButton:!0,confirmButtonText:"是的，確定刪除"}).then(async a=>{a.value&&(await u(g.value.length==1?1:h.value.current),N.fire("This Deleted!",`刪除外包商「${r.name}」！`,"success"))})},m=$(null);return(r,a)=>(f(),k(B,null,[s(ee,{title:Ut}),e("div",At,[e("div",Ft,[e("div",Rt,[e("div",jt,[e("div",St,[e("div",Bt,[e("div",It,[e("div",Dt,[A(e("input",{type:"text",class:"form-control",placeholder:"搜尋","onUpdate:modelValue":a[0]||(a[0]=o=>i.keyword=o),onKeyup:a[1]||(a[1]=X(o=>u(1),["enter"]))},null,544),[[W,i.keyword]]),e("span",Tt,[e("button",{class:"btn btn-primary",type:"button",onClick:a[2]||(a[2]=o=>u(1))}," 搜尋 ")])]),e("button",{class:"btn btn-primary mt-2 mt-lg-0",onClick:a[3]||(a[3]=o=>l.value.show())},"新增外包商")])])])]),e("div",Mt,[s(Z,{header:v,items:c(g),onChangePage:u,onOrderChange:C,pagination:c(h),orderBy:i.orderBy,sort:i.sort},{type:p(({value:o})=>[Y(d(o==="corporation"?"是":"否"),1)]),action:p(({item:o})=>[e("div",Nt,[e("button",{class:"btn btn-sm btn-danger me-2",type:"button",onClick:w=>q(o)},"刪除",8,Vt),e("button",{class:"btn btn-sm btn-info me-2",type:"button",onClick:w=>l.value.show(o)},"修改",8,Gt),e("button",{class:"btn btn-sm btn-primary",type:"button",onClick:w=>m.value.show(o)},"寄送勞報單",8,Lt)])]),_:1},8,["items","pagination","orderBy","sort"])])])]),s(Te,{ref_key:"formModalRef",ref:l,reload:()=>u(c(h).current,c(h).size)},null,8,["reload"]),s(Ct,{ref_key:"sendInfoRef",ref:m},null,512)])],64))}};export{Qt as default};
