import{R as z,m as E,x as p,b as _,k as I,w as u,d as b,e as t,t as e,h as T,C as q,c as H,D as V,g as c,f as a,J,B as U,F as K,a as Q,j as R}from"./index-d6d7b493.js";import{a as j,u as G,_ as w,c as W,D as X,b as Y,S as M}from"./sweetalert2.all-4c882652.js";import{M as L}from"./Modal-3e312f8a.js";import{u as O,_ as S}from"./FormUploadFile-17cfa63e.js";import{_ as P}from"./FormSelect-e97a40eb.js";import{u as Z}from"./useConfig-4604b8e3.js";import"./plugin-vueexport-helper-c27b6911.js";import"./menu-c12ea4fa.js";import"./default.cssvuetypestyleindex0srctruelang-dacab08e.js";const tt=[{date:"2024/01/31",name:"王小明",item:"",payDate:"",netDisbursement:"",postBack:!0,type:"corporation",email:"123@gmail.com",identity:"",phone:"09123456789",bankId:"001",bankAccount:"123456789"},{date:"2024/01/15",name:"李大華",item:"",payDate:"",netDisbursement:"",postBack:!0,type:"person",email:"1234@gmail.com",taxId:"",phone:"09123456789",bankId:"001",bankAccount:"123456789"}];function et(){const{setResponseList:k,list:h,pagination:d}=z();return{getPaymentlogList:async y=>{console.log(y),k({records:tt,total:1,size:10,current:1,pages:1})},pagination:d,paymentLogList:h}}const st={key:0,class:"table-responsive"},ot={class:"table mb-0 border-top table-bordered text-nowrap rounded"},nt=t("th",{class:"w-25"},"法人",-1),lt=t("th",{class:"w-25"},"姓名 ",-1),at=t("th",{class:"w-25"},"Email ",-1),rt=t("th",{class:"w-25"},"電話 ",-1),ct=t("th",{class:"w-25"},"帳戶資訊",-1),dt={key:0},it=t("th",{class:"w-25"},"身分證字號",-1),ut={key:1},_t=t("th",{class:"w-25"},"統編",-1),mt=t("tr",null,[t("th",{class:"w-25"}),t("td",null,[t("button",{type:"button",class:"btn btn-primary"},"回簽pdf勞報單")])],-1),ht=E({__name:"LogInfoModal",setup(k,{expose:h}){const d=p(null),l=p();return h({show:f=>{l.value=f,d.value.show()}}),(f,i)=>(_(),I(L,{ref_key:"modalRef",ref:d,title:"檢視明細","dialog-class":"modal-dialog-centered"},{default:u(()=>[l.value?(_(),b("div",st,[t("table",ot,[t("tbody",null,[t("tr",null,[nt,t("td",null,e(l.value.type==="person"?"是":"否"),1)]),t("tr",null,[lt,t("td",null,e(l.value.name),1)]),t("tr",null,[at,t("td",null,e(l.value.email),1)]),t("tr",null,[rt,t("td",null,e(l.value.phone),1)]),t("tr",null,[ct,t("td",null,e(l.value.bankId)+" - "+e(l.value.bankAccount),1)]),l.value.type==="person"?(_(),b("tr",dt,[it,t("td",null,e(l.value.identity),1)])):(_(),b("tr",ut,[_t,t("td",null,e(l.value.taxId),1)])),mt])])])):T("",!0)]),_:1},512))}}),pt={key:0,class:"table-responsive",style:{"overflow-y":"hidden"}},bt={key:0,class:"table mb-0 border-top table-bordered text-nowrap rounded"},yt=t("tr",null,[t("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),ft=t("th",{class:"w-25"},"專案名稱",-1),vt=t("tr",null,[t("th",{class:"w-25"},"是否為法人"),t("td",null," 否 ")],-1),gt=t("th",{class:"w-25"},"領款人姓名",-1),wt=t("th",{class:"w-25"},"身分證字號",-1),kt=t("th",{class:"w-25"},"聯絡電話",-1),$t=t("th",{class:"w-25"},"戶籍地址",-1),xt=t("th",{class:"w-25"},"通訊地址",-1),Ct=t("th",{class:"w-25"},"是否加上核果報帳使用",-1),Dt=t("th",{class:"w-25"},"銀行匯款帳號",-1),At=t("tr",null,[t("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),Bt=t("th",{class:"w-25"},"支付金額",-1),Ft=t("span",{class:"input-group-text"},"新臺幣",-1),Lt=t("span",{class:"input-group-text"},"元",-1),Rt=t("th",{class:"w-25"},"所得類別",-1),Mt={class:"w-25"},St=t("td",null," 新臺幣 0 元 ",-1),It=t("tr",null,[t("th",{class:"w-25"},"-健保補充費 2.11 %"),t("td",null," 新臺幣 16,000 元 ")],-1),Tt=t("tr",null,[t("th",{class:"w-25"},"=支領淨額"),t("td",null," 新臺幣 0 元 ")],-1),Vt=t("tr",null,[t("th",{class:"w-25"},"支付方式"),t("td",null,"匯款")],-1),jt=t("th",{class:"w-25"},"收款日期",-1),Gt=t("th",{class:""},"上傳已簽名之勞報單",-1),Ot={class:""},Pt={key:1,class:"table mb-0 border-top table-bordered text-nowrap rounded"},Nt=t("tr",null,[t("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),zt=t("th",{class:"w-25"},"專案名稱",-1),Et=t("tr",null,[t("th",{class:"w-25"},"是否為法人"),t("td",null," 是 ")],-1),qt=t("th",{class:"w-25"},"公司名稱",-1),Ht=t("th",{class:"w-25"},"統編",-1),Jt=t("th",{class:"w-25"},"聯絡電話",-1),Ut=t("th",{class:"w-25"},"公司地址",-1),Kt=t("th",{class:"w-25"},"銀行匯款帳號",-1),Qt=t("tr",null,[t("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),Wt=t("th",{class:"w-25"},"支付金額",-1),Xt=t("span",{class:"input-group-text"},"新臺幣",-1),Yt=t("span",{class:"input-group-text"},"元",-1),Zt=t("th",{class:"w-25"},"收款日期",-1),te=t("th",{class:""},"上傳發票",-1),ee={class:""},se={class:"btn-list text-center mt-5"},oe=t("button",{class:"btn btn-md btn-primary",type:"submit"},"確定",-1),ne={__name:"CreateFormModal",props:{reload:{type:Function,required:!0}},setup(k,{expose:h}){const{incomeTax:d,incomeTaxValue:l}=Z(),{getOutsorucerById:y}=O(),f=q(),i=k,v=p(null),x={project:"",amount:"",incomeCategory:"incomeTaxFive",date:"",singFile:""},o=p(null),m=H(()=>{const n={};return j().shape({...n})}),{handleSubmit:F,resetForm:C,values:D}=G({initialValues:x,validationSchema:m}),A=async n=>{o.value=y(n),C(),v.value.show()},g=()=>{o.value=void 0,C({values:x,touched:!1})},$=F(async n=>{console.log(n),f.success("成功"),i.reload(),v.value.hide()});return h({show:A}),(n,s)=>(_(),I(L,{ref_key:"modalRef",ref:v,title:"建立付款","hide-footer":!0,dialogClass:"modal-lg modal-dialog-scrollable","data-bs-backdrop":"static","modal-hide":g},{default:u(()=>[t("form",{class:"row h-full",onSubmit:s[1]||(s[1]=V((...B)=>c($)&&c($)(...B),["prevent"]))},[o.value?(_(),b("div",pt,[o.value.type==="person"?(_(),b("table",bt,[t("tbody",null,[yt,t("tr",null,[ft,t("td",null,[a(w,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),vt,t("tr",null,[gt,t("td",null,e(o.value.name),1)]),t("tr",null,[wt,t("td",null,e(o.value.identity),1)]),t("tr",null,[kt,t("td",null,e(o.value.phone),1)]),t("tr",null,[$t,t("td",null,e(o.value.residenceAddress),1)]),t("tr",null,[xt,t("td",null,e(o.value.address),1)]),t("tr",null,[Ct,t("td",null,e(o.value.useForNucleusAccounting?"是":"否"),1)]),t("tr",null,[Dt,t("td",null,e(o.value.bankId)+" - "+e(o.value.bankAccount),1)]),At,t("tr",null,[Bt,t("td",null,[a(w,{name:"project",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:u(()=>[Ft]),iconRight:u(()=>[Lt]),_:1})])]),t("tr",null,[Rt,t("td",null,[a(P,{name:"incomeCategory",placeholder:"請選擇所得類別","can-clear":!1,"can-deselect":!1,formGroupAttr:{class:"mb-0"},options:c(d)},null,8,["options"])])]),t("tr",null,[t("th",Mt,"-代扣所得稅 "+e(c(l)[c(D).incomeCategory])+" %",1),St]),It,Tt,Vt,t("tr",null,[jt,t("td",null,[a(w,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),t("tr",null,[Gt,t("td",null,[t("div",Ot,[a(S,{name:"singFile",label:"",btnText:"上傳已簽名之勞報單",accept:".pdf"})])])])])])):(_(),b("table",Pt,[t("tbody",null,[Nt,t("tr",null,[zt,t("td",null,[a(w,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),Et,t("tr",null,[qt,t("td",null,e(o.value.name),1)]),t("tr",null,[Ht,t("td",null,e(o.value.taxTd),1)]),t("tr",null,[Jt,t("td",null,e(o.value.phone),1)]),t("tr",null,[Ut,t("td",null,e(o.value.companyAddress),1)]),t("tr",null,[Kt,t("td",null,e(o.value.bankId)+" - "+e(o.value.bankAccount),1)]),Qt,t("tr",null,[Wt,t("td",null,[a(w,{name:"amount",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:u(()=>[Xt]),iconRight:u(()=>[Yt]),_:1})])]),t("tr",null,[Zt,t("td",null,[a(w,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),t("tr",null,[te,t("td",null,[t("div",ee,[a(S,{name:"singFile",label:"",btnText:"上傳發票",accept:".jpg,.png,.jpeg"})])])])])])),t("div",se,[t("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:s[0]||(s[0]=B=>v.value.hide())},"取消"),oe])])):T("",!0)],32)]),_:1},512))}},le={class:"row row-sm"},ae={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},re={class:"card custom-card"},ce={class:"card-header border-bottom-0 pb-0"},de={class:"d-flex justify-content-between align-items-center flex-wrap flex-md-nowrap"},ie={class:"input-group mb-2 mb-lg-0",style:{"max-width":"80%"}},ue=t("button",{class:"btn btn-info",type:"button"},"下載 CSV ",-1),_e={class:"card-body"},me={class:"d-flex"},he=["onClick"],pe=["onClick"],be={class:"col-12"},ye={class:"btn-list text-center"},fe=t("button",{class:"btn btn-md btn-primary",type:"submit"},"確定",-1),ve="付款管理",Fe={__name:"index",setup(k){const{getPaymentlogList:h,pagination:d,paymentLogList:l}=et(),{getOutsorucerOption:y,outsorucerOption:f}=O(),i=J({keyword:"",sort:"desc",orderBy:"createDate",date:[void 0,void 0]}),{handleSubmit:v,resetForm:x}=G({initialValues:{user:void 0},validationSchema:j().shape({user:W().nullable(!1).typeError("請選擇領款人").required("請選擇領款人")})}),o=[{key:"date",label:"日期",sort:!0},{key:"type",label:"法人",sort:!0},{key:"name",label:"姓名",sort:!0},{key:"item",label:"品項名稱"},{key:"payDate",label:"支付日期"},{key:"netDisbursement",label:"支付淨額"},{key:"postBack",label:"是否回傳"},{key:"action",label:"Action"}],m=async(n=1,s=10)=>{await h({page:n,limit:s,...i})},F=(n="createTime",s="desc")=>{i.orderBy=n,i.sort=s,m(1,d.value.size)},C=n=>{M.fire({title:"Are you sure?",text:`刪除此紀錄「${n.date}/${n.name}」？`,icon:"warning",showCancelButton:!0,confirmButtonText:"是的，確定刪除"}).then(async s=>{s.isConfirmed&&(await m(l.value.length===1?1:d.value.current),M.fire("已刪除!",`刪除紀錄「${n.date}/${n.name}」！`,"success"))})};U(()=>{m(1),y()});const D=p(null),A=p(null),g=p(null),$=v(n=>{console.log(n),A.value.show(n.user),g.value.hide()});return(n,s)=>{const B=Q("Datepicker");return _(),b(K,null,[a(Y,{title:ve}),t("div",le,[t("div",ae,[t("div",re,[t("div",ce,[t("div",de,[t("div",ie,[a(B,{modelValue:i.date,"onUpdate:modelValue":s[0]||(s[0]=r=>i.date=r),range:"","enable-time-picker":!1,format:"yyyy/MM/dd",style:{width:"100%","max-width":"300px"},placeholder:"日期範圍"},null,8,["modelValue"]),t("button",{class:"btn btn-primary",type:"button",onClick:s[1]||(s[1]=r=>m(1))}," 搜尋 ")]),t("div",null,[t("button",{class:"btn btn-primary me-2",type:"button",onClick:s[2]||(s[2]=r=>g.value.show())},"建立付款 "),ue])])]),t("div",_e,[a(X,{header:o,items:c(l),onChangePage:m,onOrderChange:F,pagination:c(d),orderBy:i.orderBy,sort:i.sort},{type:u(({value:r})=>[R(e(r==="corporation"?"是":"否"),1)]),postBack:u(({value:r})=>[R(e(r?"是":"否"),1)]),action:u(({item:r})=>[t("div",me,[t("button",{class:"btn btn-sm btn-danger me-2",onClick:N=>C(r)},"刪除",8,he),t("button",{class:"btn btn-sm btn-info me-2",onClick:N=>D.value.show(r)},"檢視",8,pe)])]),_:1},8,["items","pagination","orderBy","sort"])])])])]),a(ht,{ref_key:"logInfoModalRef",ref:D},null,512),a(ne,{ref_key:"createFormModalRef",ref:A,reload:()=>m(c(d).current,c(d).size)},null,8,["reload"]),a(L,{ref_key:"modalRef",ref:g,title:"建立付款領款人","modal-hide":()=>c(x)(),"hide-footer":!0,dialogClass:" modal-dialog-centered","data-bs-backdrop":"static"},{default:u(()=>[t("form",{class:"row",onSubmit:s[4]||(s[4]=V((...r)=>c($)&&c($)(...r),["prevent"]))},[t("div",be,[a(P,{name:"user",label:"領款人",placeholder:"選擇領款人",options:c(f),searchable:!0},null,8,["options"])]),t("div",ye,[t("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:s[3]||(s[3]=r=>g.value.hide())},"取消"),fe])],32)]),_:1},8,["modal-hide"])],64)}}};export{Fe as default};
