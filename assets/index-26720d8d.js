import{C as X,D as Y,x as A,c as M,E as T,b as f,d as w,e,j as z,t as h,G as F,H as D,g as t,I as Z,h as L,A as ee,J as te,k as G,w as v,K as P,L as V,M as O,F as I,f as n,N as se,O as le,B as ne,P as oe,Q as ae}from"./index-d757128d.js";import{_ as K,D as re,a as ie,S as E}from"./sweetalert2.all-ef22fbbf.js";import{u as ce,c as s,a as W,b as H,_ as u}from"./object-ac06494d.js";import{i as de}from"./isNil-c75b1b34.js";import"./plugin-vueexport-helper-c27b6911.js";import"./menu-02b7f324.js";function B(d){return d===void 0}const ue=[{id:"1",name:"王小明",type:"corporation",email:"123@gmail.com",identity:"",phone:"09123456789",bankId:"001",bankAccount:"123456789",residenceAddress:"",idCardFront:"",idCardBack:""},{id:"2",name:"王小明2",type:"person",email:"1234@gmail.com",identity:"",phone:"09123456789",bankId:"001",bankAccount:"123456789",residenceAddress:"",idCardFront:"",idCardBack:""}],he=()=>{const{setResponseList:d,pagination:k,list:_}=X();return{getOutsourcers:c=>{console.log(c),d({records:ue,total:1,size:10,current:1,pages:1})},pagination:k,outsourcerList:_}},S=d=>"File"in window&&d instanceof File,pe=["accept"],me={class:"mg-b-10 text-start"},_e={class:"text-danger mx-1"},be={key:0,class:"d-inline-block"},ge=["title"],j={__name:"FormUploadFile",props:{label:String,labelWarning:String,btnText:String,name:{type:String,required:!0},orgFileName:String,showFileName:{type:Boolean,default:!0},required:{type:Boolean,default:!1},accept:String},emits:["clearFile","changeFile"],setup(d,{emit:k}){const _=d,m=Y(_,"name"),c=k,{value:r,errorMessage:p,handleChange:x}=ce(m,void 0,{..._.value&&{initialValue:_.value}}),o=A({}),C=()=>{o.value.click()},b=l=>{l.target.files&&l.target.files.length>0&&(x(l.target.files[0]),c("changeFile",r.value),o.value.value=null)},a=M(()=>B(r.value)||T(r.value)?"":S(r.value)?r.value.name:_.orgFileName),i=()=>{S(r.value)||c("clearFile"),x(void 0)};return(l,q)=>(f(),w("div",null,[e("input",{type:"file",class:"d-none",ref:N=>o.value=N,accept:d.accept,onChange:b},null,40,pe),e("p",me,[z(h(d.label),1),F(e("span",_e,"*",512),[[D,d.required]]),F(e("span",{class:"text-warning"},"("+h(d.labelWarning)+")",513),[[D,!t(B)(d.labelWarning)]])]),Z(l.$slots,"img"),F(e("button",{type:"button",onClick:C,class:"btn btn-sm btn-outline-primary"},h(d.btnText),513),[[D,t(B)(t(r))||!t(B)(t(r))&&!t(S)(t(r))&&t(T)(t(r))]]),!t(B)(t(r))&&t(S)(t(r))||!t(S)(t(r))&&!t(T)(t(r))?(f(),w("div",be,[d.showFileName?(f(),w("a",{key:0,href:"javascript:;",title:a.value,class:"text-decoration-underline me-2"},h(a.value),9,ge)):L("",!0),e("i",{class:"ion-close-round text-muted cursor-pointer fs-6 pt-2","data-bs-toggle":"tooltip",onClick:i})])):L("",!0),e("div",{class:ee(["invalid-feedback",{"d-block":!!t(p)}])},h(t(p)),3)]))}},ve={class:"col-12 mb-3"},fe={class:"form-check form-check-inline"},ye=e("label",{class:"form-check-label",for:"typePerson"},"自然人",-1),ke={class:"form-check form-check-inline"},we=e("label",{class:"form-check-label",for:"typeCorporation"},"法人",-1),$e={class:"col-12 col-lg-6"},xe={class:"col-12 col-lg-6"},Ce={class:"col-12 col-lg-6"},qe={class:"col-12 col-lg-6"},Fe={class:"col-12"},Ae={class:"col-12"},Se={class:"col-12 col-lg-6"},Re={class:"col-12 col-lg-6"},Be={class:"col-12 col-lg-6"},je=["src"],Ie={class:"col-12 col-lg-6 mt-3 mt-lg-0"},Ne=["src"],Te={class:"col-12 mt-3"},De={class:"form-check"},Ve=e("label",{class:"form-check-label",for:"useForNucleusAccounting"}," 是否加上核果報帳使用 ",-1),Me={class:"col-12 col-lg-6"},Le={class:"col-12 col-lg-6"},Ue={class:"col-12 col-lg-6"},Oe={class:"col-12 col-lg-6"},Ee={class:"col-12"},ze={class:"col-12 col-lg-6"},Ge={class:"col-12 col-lg-6"},Pe={class:"col-12 col-lg-6"},Ke=["src"],We={class:"col-12 col-lg-6 mt-3 mt-lg-0"},He=["src"],Je={class:"col-12 mt-3"},Qe=["src"],Xe={class:"btn-list text-center mt-5"},Ye=e("button",{class:"btn btn-md btn-primary",type:"submit"},"確定",-1),Ze={__name:"FormModal",props:{reload:{type:Function,required:!0}},setup(d,{expose:k}){const _=te(),m=d,c=A(null),r={type:"person",name:"",email:"",identity:"",phone:"",residenceAddress:"",address:"",bankId:"",bankAccount:"",idCardFront:"",idCardBack:"",useForNucleusAccounting:!1,bankStatement:"",taxId:"",companyAddress:""},p=A(null),x=M(()=>de(t(p))),o=M(()=>{const g={type:s().required("請選擇類型"),email:s().required("請輸入Email").email("請輸入正確email格式"),phone:s().required("請輸入聯絡電話"),bankId:s().required("請輸入收款銀行"),bankAccount:s().required("請輸入收款帳號"),bankStatement:s().required("請上傳銀行影本")};return W().shape({...g,name:s().when("type",{is:"person",then:()=>s().required("請輸入領款人姓名"),otherwise:()=>s().required("請輸入公司名稱")}),identity:s().when("type",{is:"person",then:()=>s().required("請輸入身分證字號"),otherwise:()=>s().notRequired()}),residenceAddress:s().when("type",{is:"person",then:()=>s().required("請輸入戶籍地址"),otherwise:()=>s().notRequired()}),address:s().when("type",{is:"person",then:()=>s().required("請輸入通訊地址"),otherwise:()=>s().notRequired()}),idCardFront:s().when("type",{is:"person",then:()=>s().required("請上傳身分證正面"),otherwise:()=>s().notRequired()}),idCardBack:s().when("type",{is:"person",then:()=>s().required("請上傳身分證反面"),otherwise:()=>s().notRequired()}),taxId:s().when("type",{is:"person",then:()=>s().notRequired(),otherwise:()=>s().required("請輸入統編")}),companyAddress:s().when("type",{is:"person",then:()=>s().notRequired(),otherwise:()=>s().required("請輸入公司地址")})})}),{handleSubmit:C,resetForm:b,values:a,defineField:i}=H({initialValues:r,validationSchema:o}),[l]=i("type"),[q]=i("useForNucleusAccounting");function N(){b({values:{...r,type:l.value}})}const J=async g=>{g?(p.value=g,b({values:g})):b({values:r}),c.value.show()},Q=()=>{p.value=void 0,b({values:r,touched:!1})},U=C(async g=>{console.log(g),_.success("成功"),m.reload(),c.value.hide()}),R=g=>S(g)?window.URL.createObjectURL(g):"";return k({show:J}),(g,y)=>(f(),G(K,{ref_key:"modalRef",ref:c,title:x.value?"新增外包商":"編輯外包商","hide-footer":!0,dialogClass:"modal-lg","modal-hide":Q},{default:v(()=>[e("form",{class:"row",onSubmit:y[4]||(y[4]=P((...$)=>t(U)&&t(U)(...$),["prevent"]))},[e("div",ve,[e("div",fe,[F(e("input",{class:"form-check-input",type:"radio",id:"typePerson",value:"person",onChange:N,"onUpdate:modelValue":y[0]||(y[0]=$=>V(l)?l.value=$:null)},null,544),[[O,t(l)]]),ye]),e("div",ke,[F(e("input",{class:"form-check-input",type:"radio",id:"typeCorporation",onChange:N,value:"corporation","onUpdate:modelValue":y[1]||(y[1]=$=>V(l)?l.value=$:null)},null,544),[[O,t(l)]]),we])]),t(a).type==="person"?(f(),w(I,{key:0},[e("div",$e,[n(u,{name:"name",label:"領款人姓名",required:"",placeholder:"請輸入"})]),e("div",xe,[n(u,{name:"identity",label:"身分證字號",required:"",placeholder:"請輸入"})]),e("div",Ce,[n(u,{name:"email",label:"Email",required:"",placeholder:"請輸入"})]),e("div",qe,[n(u,{name:"phone",label:"聯絡電話",required:"",placeholder:"請輸入"})]),e("div",Fe,[n(u,{name:"residenceAddress",label:"戶籍地址",required:"",placeholder:"請輸入"})]),e("div",Ae,[n(u,{name:"address",label:"通訊地址",required:"",placeholder:"請輸入"})]),e("div",Se,[n(u,{name:"bankId",label:"收款銀行",required:"",placeholder:"請輸入"})]),e("div",Re,[n(u,{name:"bankAccount",label:"收款帳號",required:"",placeholder:"請輸入"})]),e("div",Be,[n(j,{name:"idCardFront",label:"身分證正面",required:"",placeholder:"請輸入",btnText:"上傳身分證正面",accept:".jpg,.png,.jpeg"},{img:v(()=>[e("img",{src:R(t(a).idCardFront)},null,8,je)]),_:1})]),e("div",Ie,[n(j,{name:"idCardBack",label:"身分證反面",required:"",placeholder:"請輸入",btnText:"上傳身分證反面",accept:".jpg,.png,.jpeg"},{img:v(()=>[e("img",{src:R(t(a).idCardBack)},null,8,Ne)]),_:1})]),e("div",Te,[e("div",De,[F(e("input",{class:"form-check-input",type:"checkbox",id:"useForNucleusAccounting","onUpdate:modelValue":y[2]||(y[2]=$=>V(q)?q.value=$:null)},null,512),[[se,t(q)]]),Ve])])],64)):(f(),w(I,{key:1},[e("div",Me,[n(u,{name:"name",label:"公司名稱",required:"",placeholder:"請輸入"})]),e("div",Le,[n(u,{name:"taxId",label:"統編",required:"",placeholder:"請輸入"})]),e("div",Ue,[n(u,{name:"email",label:"Email",required:"",placeholder:"請輸入"})]),e("div",Oe,[n(u,{name:"phone",label:"聯絡電話",required:"",placeholder:"請輸入"})]),e("div",Ee,[n(u,{name:"companyAddress",label:"公司地址",required:"",placeholder:"請輸入"})]),e("div",ze,[n(u,{name:"bankId",label:"收款銀行",required:"",placeholder:"請輸入"})]),e("div",Ge,[n(u,{name:"bankAccount",label:"收款帳號",required:"",placeholder:"請輸入"})]),e("div",Pe,[n(j,{name:"idCardFront",label:"身分證正面",required:"",placeholder:"請輸入",btnText:"上傳身分證正面",accept:".jpg,.png,.jpeg"},{img:v(()=>[e("img",{src:R(t(a).idCardFront)},null,8,Ke)]),_:1})]),e("div",We,[n(j,{name:"idCardBack",label:"身分證反面",required:"",placeholder:"請輸入",btnText:"上傳身分證反面",accept:".jpg,.png,.jpeg"},{img:v(()=>[e("img",{src:R(t(a).idCardBack)},null,8,He)]),_:1})])],64)),e("div",Je,[n(j,{name:"bankStatement",label:"銀行影本",required:"",placeholder:"請輸入",btnText:"上傳銀行影本",accept:".jpg,.png,.jpeg,.pdf"},{img:v(()=>[e("img",{src:R(t(a).bankStatement)},null,8,Qe)]),_:1})]),e("div",Xe,[e("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:y[3]||(y[3]=$=>c.value.hide())},"取消"),Ye])],32)]),_:1},8,["title"]))}},et={key:0,class:"table-responsive"},tt={class:"table mb-0 border-top table-bordered text-nowrap rounded"},st=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),lt=e("th",{class:"w-25"},"專案名稱",-1),nt=e("th",{class:"w-25"},"領款人姓名",-1),ot=e("th",{class:"w-25"},"身分證字號",-1),at=e("th",{class:"w-25"},"聯絡電話",-1),rt=e("th",{class:"w-25"},"戶籍地址",-1),it=e("th",{class:"w-25"},"通訊地址",-1),ct=e("th",{class:"w-25"},"是否加上核果報帳使用",-1),dt=e("th",{class:"w-25"},"公司名稱",-1),ut=e("th",{class:"w-25"},"統編",-1),ht=e("th",{class:"w-25"},"聯絡電話",-1),pt=e("th",{class:"w-25"},"公司地址",-1),mt=e("th",{class:"w-25"},"銀行匯款帳號",-1),_t=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),bt=e("th",{class:"w-25"},"支付金額",-1),gt=e("span",{class:"input-group-text"},"新臺幣",-1),vt=e("span",{class:"input-group-text"},"元",-1),ft=e("tr",null,[e("th",{class:"w-25"},"所得類別"),e("td",null,"薪資所得(50)")],-1),yt=e("tr",null,[e("th",{class:"w-25"},"-代扣所得稅 5 %"),e("td",null," 新臺幣 0 元 ")],-1),kt=e("tr",null,[e("th",{class:"w-25"},"-健保補充費 2.11 %"),e("td",null," 新臺幣 16,000 元 ")],-1),wt=e("tr",null,[e("th",{class:"w-25"},"=支領淨額"),e("td",null," 新臺幣 0 元 ")],-1),$t=e("tr",null,[e("th",{class:"w-25"},"支付方式"),e("td",null,"匯款")],-1),xt=e("th",{class:"w-25"},"收款日期",-1),Ct=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"身分證正反面影本")],-1),qt=e("tr",null,[e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (正面) ")]),e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (反面) ")])],-1),Ft=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"銀行影本")],-1),At=e("tr",null,[e("td",{colspan:"2"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (銀行影本) ")])],-1),St=e("div",{class:"btn-list text-center mt-5"},[e("button",{class:"btn btn-md btn-primary",type:"submit"}," 確認寄出 ")],-1),Rt={__name:"SendInfoModal",setup(d,{expose:k}){const _={date:""},m=A(null),{handleSubmit:c,resetForm:r,defineField:p,errors:x}=H({initialValues:_,validationSchema:W().shape({})}),o=A(null),C=async a=>{a&&(o.value=a,r({values:a})),m.value.show()},b=c(a=>{console.log(a),m.value.hide()});return k({show:C}),(a,i)=>(f(),G(K,{ref_key:"modalRef",ref:m,title:"寄送勞報單","hide-footer":!0,dialogClass:" modal-lg"},{default:v(()=>[e("form",{class:"row",onSubmit:i[0]||(i[0]=P((...l)=>t(b)&&t(b)(...l),["prevent"]))},[o.value?(f(),w("div",et,[e("table",tt,[e("tbody",null,[st,e("tr",null,[lt,e("td",null,[n(u,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),o.value.type==="person"?(f(),w(I,{key:0},[e("tr",null,[nt,e("td",null,h(o.value.name),1)]),e("tr",null,[ot,e("td",null,h(o.value.identity),1)]),e("tr",null,[at,e("td",null,h(o.value.phone),1)]),e("tr",null,[rt,e("td",null,h(o.value.residenceAddress),1)]),e("tr",null,[it,e("td",null,h(o.value.address),1)]),e("tr",null,[ct,e("td",null,h(o.value.useForNucleusAccounting?"是":"否"),1)])],64)):(f(),w(I,{key:1},[e("tr",null,[dt,e("td",null,h(o.value.name),1)]),e("tr",null,[ut,e("td",null,h(o.value.taxTd),1)]),e("tr",null,[ht,e("td",null,h(o.value.phone),1)]),e("tr",null,[pt,e("td",null,h(o.value.companyAddress),1)])],64)),e("tr",null,[mt,e("td",null,h(o.value.bankId)+" - "+h(o.value.bankAccount),1)]),_t,e("tr",null,[bt,e("td",null,[n(u,{name:"project",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:v(()=>[gt]),iconRight:v(()=>[vt]),_:1})])]),ft,yt,kt,wt,$t,e("tr",null,[xt,e("td",null,[n(u,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),Ct,qt,Ft,At])]),St])):L("",!0)],32)]),_:1},512))}},Bt={class:"row row-sm"},jt={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},It={class:"card custom-card"},Nt={class:"card-header border-bottom-0 pb-0"},Tt={class:"row"},Dt={class:"col-12"},Vt={class:"d-flex flex-column flex-lg-row justify-content-between"},Mt={class:"input-group wd-lg-25p"},Lt={class:"input-group-append"},Ut={class:"card-body"},Ot={class:"d-flex"},Et=["onClick"],zt=["onClick"],Gt=["onClick"],Pt="外包商管理",Yt={__name:"index",setup(d){const{getOutsourcers:k,outsourcerList:_,pagination:m}=he(),c=le({keyword:"",sort:"desc",orderBy:"createDate"});ne(()=>{p(1)});const r=[{key:"type",label:"法人"},{key:"name",label:"姓名",sort:!0},{key:"email",label:"email",sort:!0},{key:"phone",label:"聯絡電話",sort:!0},{key:"bankId",label:"銀行行號",sort:!0},{key:"bankAccount",label:"銀行帳號",sort:!0},{key:"action",label:"Action"}],p=async(a=1,i=10)=>{let l={page:a,limit:i,...c};await k(l)},x=(a="createTime",i="desc")=>{c.orderBy=a,c.sort=i,p(1,m.value.size)},o=A(null),C=a=>{E.fire({title:"Are you sure?",text:`刪除外包商「${a.name}」？`,type:"warning",showCancelButton:!0,confirmButtonText:"是的，確定刪除"}).then(async i=>{i.value&&(await p(_.value.length==1?1:m.value.current),E.fire("This Deleted!",`刪除外包商「${a.name}」！`,"success"))})},b=A(null);return(a,i)=>(f(),w(I,null,[n(ie,{title:Pt}),e("div",Bt,[e("div",jt,[e("div",It,[e("div",Nt,[e("div",Tt,[e("div",Dt,[e("div",Vt,[e("div",Mt,[F(e("input",{type:"text",class:"form-control",placeholder:"搜尋","onUpdate:modelValue":i[0]||(i[0]=l=>c.keyword=l),onKeyup:i[1]||(i[1]=ae(l=>p(1),["enter"]))},null,544),[[oe,c.keyword]]),e("span",Lt,[e("button",{class:"btn btn-primary",type:"button",onClick:i[2]||(i[2]=l=>p(1))}," 搜尋 ")])]),e("button",{class:"btn btn-primary mt-2 mt-lg-0",onClick:i[3]||(i[3]=l=>o.value.show())},"新增外包商")])])])]),e("div",Ut,[n(re,{header:r,items:t(_),onChangePage:p,onOrderChange:x,pagination:t(m),orderBy:c.orderBy,sort:c.sort},{type:v(({value:l})=>[z(h(l==="corporation"?"是":"否"),1)]),action:v(({item:l})=>[e("div",Ot,[e("button",{class:"btn btn-sm btn-danger me-2",type:"button",onClick:q=>C(l)},"刪除",8,Et),e("button",{class:"btn btn-sm btn-info me-2",type:"button",onClick:q=>o.value.show(l)},"修改",8,zt),e("button",{class:"btn btn-sm btn-primary",type:"button",onClick:q=>b.value.show(l)},"寄送勞報單",8,Gt)])]),_:1},8,["items","pagination","orderBy","sort"])])])]),n(Ze,{ref_key:"formModalRef",ref:o,reload:()=>p(t(m).current,t(m).size)},null,8,["reload"]),n(Rt,{ref_key:"sendInfoRef",ref:b},null,512)])],64))}};export{Yt as default};
