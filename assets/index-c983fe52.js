import{M as E,k as $,l as N,N as A,o as k,c as q,a as e,E as z,t as h,O as B,P as R,D as t,e as G,b as D,n as W,Q as K,g as M,C as w,w as V,B as c,R as P,s as H,S as Q,f as J,F as X}from"./index-c5178373.js";import{u as Y,a as Z,i as ee,b as L,c as O,d as f,_ as p,e as U,D as te,f as se,S as T}from"./sweetalert2.all-2f8fa414.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./menu-3746472e.js";function F(i){return i===void 0}const ne=[{id:"1",name:"王小明",phone:"09123456789",bankId:"001",bankAccount:"123456789"}],le=()=>{const{setResponseList:i,pagination:g,list:m}=Y();return{getOutsourcers:o=>{console.log(o),i({records:ne,total:1,size:10,current:1,pages:1})},pagination:g,outsourcerList:m}},C=i=>"File"in window&&i instanceof File,oe=["accept"],ae={class:"mg-b-10 text-start"},re={class:"text-danger mx-1"},ie={key:0,class:"d-inline-block"},ce=["title"],I={__name:"FormUploadFile",props:{label:String,labelWarning:String,btnText:String,name:{type:String,required:!0},orgFileName:String,showFileName:{type:Boolean,default:!0},required:{type:Boolean,default:!1},accept:String},emits:["clearFile","changeFile"],setup(i,{emit:g}){const m=i,u=E(m,"name"),o=g,{value:s,errorMessage:d,handleChange:y}=Z(u,void 0,{...m.value&&{initialValue:m.value}}),a=$({}),v=()=>{a.value.click()},b=l=>{l.target.files&&l.target.files.length>0&&(y(l.target.files[0]),o("changeFile",s.value),a.value.value=null)},r=N(()=>F(s.value)||A(s.value)?"":C(s.value)?s.value.name:m.orgFileName),n=()=>{C(s.value)||o("clearFile"),y(void 0)};return(l,x)=>(k(),q("div",null,[e("input",{type:"file",class:"d-none",ref:_=>a.value=_,accept:i.accept,onChange:b},null,40,oe),e("p",ae,[z(h(i.label),1),B(e("span",re,"*",512),[[R,i.required]]),B(e("span",{class:"text-warning"},"("+h(i.labelWarning)+")",513),[[R,!t(F)(i.labelWarning)]])]),G(l.$slots,"img"),B(e("button",{type:"button",onClick:v,class:"btn btn-sm btn-outline-primary"},h(i.btnText),513),[[R,t(F)(t(s))||!t(F)(t(s))&&!t(C)(t(s))&&t(A)(t(s))]]),!t(F)(t(s))&&t(C)(t(s))||!t(C)(t(s))&&!t(A)(t(s))?(k(),q("div",ie,[i.showFileName?(k(),q("a",{key:0,href:"javascript:;",title:r.value,class:"text-decoration-underline me-2"},h(r.value),9,ce)):D("",!0),e("i",{class:"ion-close-round text-muted cursor-pointer fs-6 pt-2","data-bs-toggle":"tooltip",onClick:n})])):D("",!0),e("div",{class:W(["invalid-feedback",{"d-block":!!t(d)}])},h(t(d)),3)]))}},de={class:"col-12 col-lg-6"},ue={class:"col-12 col-lg-6"},me={class:"col-12 col-lg-6"},he={class:"col-12 col-lg-6"},_e={class:"col-12"},pe={class:"col-12"},be={class:"col-12 col-lg-6"},fe={class:"col-12 col-lg-6"},ge={class:"col-12 col-lg-6"},ve=["src"],ye={class:"col-12 col-lg-6"},ke=["src"],we={class:"btn-list text-center mt-5"},$e=e("button",{class:"btn btn-md btn-primary",type:"submit"}," 確定 ",-1),xe={__name:"FormModal",props:{reload:{type:Function,required:!0}},setup(i,{expose:g}){const m=K(),u=i,o=$(null),s={name:"",email:"",identity:"",phone:"",residenceAddress:"",address:"",bankId:"",bankAccount:"",idCardFront:"",idCardBack:""},d=$(null),y=N(()=>ee(t(d))),{handleSubmit:a,resetForm:v,values:b}=L({initialValues:s,validationSchema:O().shape({name:f().required("請輸入領款人姓名"),email:f().required("請輸入Email").email("請輸入正確email格式"),identity:f().required("請輸入身分證字號"),phone:f().required("請輸入聯絡電話"),residenceAddress:f().required("請輸入戶籍地址"),address:f().required("請輸入通訊地址"),bankId:f().required("請輸入收款銀行"),bankAccount:f().required("請輸入收款帳號"),idCardFront:f().required("請上傳身分證正面"),idCardBack:f().required("請上傳身分證反面")})}),r=async _=>{_&&(d.value=_,v({values:_})),o.value.show()},n=()=>{d.value=void 0,v({values:s,touched:!1})},l=a(async _=>{console.log(_),m.success("成功"),u.reload(),o.value.hide()}),x=_=>C(_)?window.URL.createObjectURL(_):"";return g({show:r}),(_,S)=>(k(),M(U,{ref_key:"modalRef",ref:o,title:y.value?"新增外包商":"編輯外包商","hide-footer":!0,dialogClass:" modal-lg","modal-hide":n},{default:w(()=>[e("form",{class:"row",onSubmit:S[1]||(S[1]=V((...j)=>t(l)&&t(l)(...j),["prevent"]))},[e("div",de,[c(p,{name:"name",label:"領款人姓名",required:"",placeholder:"請輸入"})]),e("div",ue,[c(p,{name:"identity",label:"身分證字號",required:"",placeholder:"請輸入"})]),e("div",me,[c(p,{name:"email",label:"Email",required:"",placeholder:"請輸入"})]),e("div",he,[c(p,{name:"phone",label:"聯絡電話",required:"",placeholder:"請輸入"})]),e("div",_e,[c(p,{name:"residenceAddress",label:"戶籍地址",required:"",placeholder:"請輸入"})]),e("div",pe,[c(p,{name:"address",label:"通訊地址",required:"",placeholder:"請輸入"})]),e("div",be,[c(p,{name:"bankId",label:"收款銀行",required:"",placeholder:"請輸入"})]),e("div",fe,[c(p,{name:"bankAccount",label:"收款帳號",required:"",placeholder:"請輸入"})]),e("div",ge,[c(I,{name:"idCardFront",label:"身分證正面",required:"",placeholder:"請輸入",btnText:"上傳身分證正面",accept:".jpg,.png,.jpeg"},{img:w(()=>[e("img",{src:x(t(b).idCardFront)},null,8,ve)]),_:1})]),e("div",ye,[c(I,{name:"idCardBack",label:"身分證反面",required:"",placeholder:"請輸入",btnText:"上傳身分證反面",accept:".jpg,.png,.jpeg"},{img:w(()=>[e("img",{src:x(t(b).idCardBack)},null,8,ke)]),_:1})]),e("div",we,[e("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:S[0]||(S[0]=j=>o.value.hide())}," 取消 "),$e])],32)]),_:1},8,["title"]))}},Ce={key:0,class:"table-responsive"},Fe={class:"table mb-0 border-top table-bordered text-nowrap rounded"},qe=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款人")],-1),Se=e("th",{class:"w-25"},"專案名稱",-1),Be=e("th",{class:"w-25"},"領款人姓名",-1),Ae=e("th",{class:"w-25"},"身分證字號",-1),Re=e("th",{class:"w-25"},"聯絡電話",-1),De=e("th",{class:"w-25"},"戶籍地址",-1),je=e("th",{class:"w-25"},"通訊地址",-1),Te=e("th",{class:"w-25"},"銀行匯款帳號",-1),Ie=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"領款金額")],-1),Ne=e("th",{class:"w-25"},"支付金額",-1),Me=e("span",{class:"input-group-text"},"新臺幣",-1),Ve=e("span",{class:"input-group-text"},"元",-1),Le=e("tr",null,[e("th",{class:"w-25"},"所得類別"),e("td",null,"薪資所得(50)")],-1),Oe=e("tr",null,[e("th",{class:"w-25"},"-代扣所得稅 5 %"),e("td",null," 新臺幣 0 元 ")],-1),Ue=e("tr",null,[e("th",{class:"w-25"},"-健保補充費 2.11 %"),e("td",null," 新臺幣 16,000 元 ")],-1),Ee=e("tr",null,[e("th",{class:"w-25"},"=支領淨額"),e("td",null," 新臺幣 0 元 ")],-1),ze=e("tr",null,[e("th",{class:"w-25"},"支付方式"),e("td",null,"匯款")],-1),Ge=e("th",{class:"w-25"},"收款日期",-1),We=e("tr",null,[e("th",{colspan:"2",class:"bg-dark text-center"},"身分證正反面影本")],-1),Ke=e("tr",null,[e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (正面) ")]),e("td",{class:"w-50"},[e("div",{style:{height:"250px"},class:"text-center d-flex align-items-center justify-content-center"}," (反面) ")])],-1),Pe=e("div",{class:"btn-list text-center mt-5"},[e("button",{class:"btn btn-md btn-primary",type:"submit"}," 確認寄出 ")],-1),He={__name:"SendInfoModal",setup(i,{expose:g}){const m={date:""},u=$(null),{handleSubmit:o,resetForm:s,defineField:d,errors:y}=L({initialValues:m,validationSchema:O().shape({})}),a=$(null),v=async r=>{r&&(a.value=r,s({values:r})),u.value.show()},b=o(r=>{console.log(r),u.value.hide()});return g({show:v}),(r,n)=>(k(),M(U,{ref_key:"modalRef",ref:u,title:"寄送勞報單","hide-footer":!0,dialogClass:" modal-lg"},{default:w(()=>[e("form",{class:"row",onSubmit:n[0]||(n[0]=V((...l)=>t(b)&&t(b)(...l),["prevent"]))},[a.value?(k(),q("div",Ce,[e("table",Fe,[e("tbody",null,[qe,e("tr",null,[Se,e("td",null,[c(p,{name:"project",formGroupAttr:{class:"mb-0"},placeholder:"專案名稱"})])]),e("tr",null,[Be,e("td",null,h(a.value.name),1)]),e("tr",null,[Ae,e("td",null,h(a.value.identity),1)]),e("tr",null,[Re,e("td",null,h(a.value.phone),1)]),e("tr",null,[De,e("td",null,h(a.value.residenceAddress),1)]),e("tr",null,[je,e("td",null,h(a.value.address),1)]),e("tr",null,[Te,e("td",null,h(a.value.bankId)+" - "+h(a.value.bankAccount),1)]),Ie,e("tr",null,[Ne,e("td",null,[c(p,{name:"project",formGroupAttr:{class:"mb-0"},type:"number"},{iconLeft:w(()=>[Me]),iconRight:w(()=>[Ve]),_:1})])]),Le,Oe,Ue,Ee,ze,e("tr",null,[Ge,e("td",null,[c(p,{name:"date",formGroupAttr:{class:"mb-0"},type:"date"})])]),We,Ke])]),Pe])):D("",!0)],32)]),_:1},512))}},Qe={class:"row row-sm"},Je={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},Xe={class:"card custom-card"},Ye={class:"card-header border-bottom-0 pb-0"},Ze={class:"row"},et={class:"col-12"},tt={class:"d-flex flex-column flex-lg-row justify-content-between"},st={class:"input-group wd-lg-25p"},nt={class:"input-group-append"},lt={class:"card-body"},ot={class:"d-flex"},at=["onClick"],rt=["onClick"],it=["onClick"],ct="外包商管理",_t={__name:"index",setup(i){const{getOutsourcers:g,outsourcerList:m,pagination:u}=le(),o=P({keyword:"",sort:"createDate",orderBy:"desc"});H(()=>{d(1)});const s=[{key:"name",label:"請款人姓名",sort:!0},{key:"phone",label:"聯絡電話",sort:!0},{key:"bankId",label:"銀行行號",sort:!0},{key:"bankAccount",label:"銀行帳號",sort:!0},{key:"action",label:"Action"}],d=async(r=1,n=10)=>{let l={page:r,limit:n,...o};await g(l)},y=(r="createTime",n="desc")=>{o.orderBy=r,o.sort=n,d(1,u.value.size)},a=$(null),v=r=>{T.fire({title:"Are you sure?",text:`刪除外包商「${r.name}」？`,type:"warning",showCancelButton:!0,confirmButtonText:"是的，確定刪除"}).then(async n=>{n.value&&(await d(m.value.length==1?1:u.value.current),T.fire("This Deleted!",`刪除外包商「${r.name}」！`,"success"))})},b=$(null);return(r,n)=>(k(),q(X,null,[c(se,{title:ct}),e("div",Qe,[e("div",Je,[e("div",Xe,[e("div",Ye,[e("div",Ze,[e("div",et,[e("div",tt,[e("div",st,[B(e("input",{type:"text",class:"form-control",placeholder:"搜尋","onUpdate:modelValue":n[0]||(n[0]=l=>o.keyword=l),onKeyup:n[1]||(n[1]=J(l=>d(1),["enter"]))},null,544),[[Q,o.keyword]]),e("span",nt,[e("button",{class:"btn btn-primary",type:"button",onClick:n[2]||(n[2]=l=>d(1))}," 搜尋 ")])]),e("button",{class:"btn btn-primary mt-2 mt-lg-0",onClick:n[3]||(n[3]=l=>a.value.show())},"新增外包商")])])])]),e("div",lt,[c(te,{header:s,items:t(m),onChangePage:d,onOrderChange:y,pagination:t(u),orderBy:o.orderBy,sort:o.sort},{action:w(({item:l})=>[e("div",ot,[e("button",{class:"btn btn-sm btn-danger me-2",type:"button",onClick:x=>v(l)},"刪除",8,at),e("button",{class:"btn btn-sm btn-info me-2",type:"button",onClick:x=>a.value.show(l)},"修改",8,rt),e("button",{class:"btn btn-sm btn-primary",type:"button",onClick:x=>b.value.show(l)},"寄送勞報單",8,it)])]),_:1},8,["items","pagination","orderBy","sort"])])])]),c(xe,{ref_key:"formModalRef",ref:a,reload:()=>d(t(u).current,t(u).size)},null,8,["reload"]),c(He,{ref_key:"sendInfoRef",ref:b},null,512)])],64))}};export{_t as default};
