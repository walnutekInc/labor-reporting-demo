import{M as oe,N as ce,C as ue,x as te,c as le,g as F,a as de,b as ae,k as he,w as M,e as o,D as fe,f as T,O as me,G as pe,t as W,j as q,J as $e,B as ye,d as ve,E as _e,K as be,L as ge,F as Me}from"./index-d6d7b493.js";import{u as xe,a as we,_ as V,D as De,b as Se,S as re}from"./sweetalert2.all-4c882652.js";import{u as ke}from"./useConfig-4604b8e3.js";import{M as Te}from"./Modal-3e312f8a.js";import{i as Fe}from"./isNil-c75b1b34.js";import"./plugin-vueexport-helper-c27b6911.js";import"./menu-c12ea4fa.js";var ie={exports:{}};(function(I,E){(function(A,b){I.exports=b()})(oe,function(){var A=1e3,b=6e4,y=36e5,B="millisecond",f="second",C="minute",x="hour",g="day",v="week",c="month",l="quarter",w="year",Y="date",J="Invalid Date",P=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var n=["th","st","nd","rd"],e=r%100;return"["+r+(n[(e-20)%10]||n[e]||n[0])+"]"}},O=function(r,n,e){var s=String(r);return!s||s.length>=n?r:""+Array(n+1-s.length).join(e)+r},X={s:O,z:function(r){var n=-r.utcOffset(),e=Math.abs(n),s=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+O(s,2,"0")+":"+O(t,2,"0")},m:function r(n,e){if(n.date()<e.date())return-r(e,n);var s=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(s,c),a=e-t<0,i=n.clone().add(s+(a?-1:1),c);return+(-(s+(e-t)/(a?t-i:i-t))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:c,y:w,w:v,d:g,D:Y,h:x,m:C,s:f,ms:B,Q:l}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},L="en",D={};D[L]=k;var ne="$isDayjsObject",ee=function(r){return r instanceof K||!(!r||!r[ne])},Z=function r(n,e,s){var t;if(!n)return L;if(typeof n=="string"){var a=n.toLowerCase();D[a]&&(t=a),e&&(D[a]=e,t=a);var i=n.split("-");if(!t&&i.length>1)return r(i[0])}else{var d=n.name;D[d]=n,t=d}return!s&&t&&(L=t),t||!s&&L},m=function(r,n){if(ee(r))return r.clone();var e=typeof n=="object"?n:{};return e.date=r,e.args=arguments,new K(e)},u=X;u.l=Z,u.i=ee,u.w=function(r,n){return m(r,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var K=function(){function r(e){this.$L=Z(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ne]=!0}var n=r.prototype;return n.parse=function(e){this.$d=function(s){var t=s.date,a=s.utc;if(t===null)return new Date(NaN);if(u.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(P);if(i){var d=i[2]-1||0,h=(i[7]||"0").substring(0,3);return a?new Date(Date.UTC(i[1],d,i[3]||1,i[4]||0,i[5]||0,i[6]||0,h)):new Date(i[1],d,i[3]||1,i[4]||0,i[5]||0,i[6]||0,h)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return u},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,s){var t=m(e);return this.startOf(s)<=t&&t<=this.endOf(s)},n.isAfter=function(e,s){return m(e)<this.startOf(s)},n.isBefore=function(e,s){return this.endOf(s)<m(e)},n.$g=function(e,s,t){return u.u(e)?this[s]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,s){var t=this,a=!!u.u(s)||s,i=u.p(e),d=function(j,_){var N=u.w(t.$u?Date.UTC(t.$y,_,j):new Date(t.$y,_,j),t);return a?N:N.endOf(g)},h=function(j,_){return u.w(t.toDate()[j].apply(t.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(_)),t)},p=this.$W,$=this.$M,S=this.$D,R="set"+(this.$u?"UTC":"");switch(i){case w:return a?d(1,0):d(31,11);case c:return a?d(1,$):d(0,$+1);case v:var H=this.$locale().weekStart||0,U=(p<H?p+7:p)-H;return d(a?S-U:S+(6-U),$);case g:case Y:return h(R+"Hours",0);case x:return h(R+"Minutes",1);case C:return h(R+"Seconds",2);case f:return h(R+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,s){var t,a=u.p(e),i="set"+(this.$u?"UTC":""),d=(t={},t[g]=i+"Date",t[Y]=i+"Date",t[c]=i+"Month",t[w]=i+"FullYear",t[x]=i+"Hours",t[C]=i+"Minutes",t[f]=i+"Seconds",t[B]=i+"Milliseconds",t)[a],h=a===g?this.$D+(s-this.$W):s;if(a===c||a===w){var p=this.clone().set(Y,1);p.$d[d](h),p.init(),this.$d=p.set(Y,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},n.set=function(e,s){return this.clone().$set(e,s)},n.get=function(e){return this[u.p(e)]()},n.add=function(e,s){var t,a=this;e=Number(e);var i=u.p(s),d=function($){var S=m(a);return u.w(S.date(S.date()+Math.round($*e)),a)};if(i===c)return this.set(c,this.$M+e);if(i===w)return this.set(w,this.$y+e);if(i===g)return d(1);if(i===v)return d(7);var h=(t={},t[C]=b,t[x]=y,t[f]=A,t)[i]||1,p=this.$d.getTime()+e*h;return u.w(p,this)},n.subtract=function(e,s){return this.add(-1*e,s)},n.format=function(e){var s=this,t=this.$locale();if(!this.isValid())return t.invalidDate||J;var a=e||"YYYY-MM-DDTHH:mm:ssZ",i=u.z(this),d=this.$H,h=this.$m,p=this.$M,$=t.weekdays,S=t.months,R=t.meridiem,H=function(_,N,z,G){return _&&(_[N]||_(s,a))||z[N].slice(0,G)},U=function(_){return u.s(d%12||12,_,"0")},j=R||function(_,N,z){var G=_<12?"AM":"PM";return z?G.toLowerCase():G};return a.replace(Q,function(_,N){return N||function(z){switch(z){case"YY":return String(s.$y).slice(-2);case"YYYY":return u.s(s.$y,4,"0");case"M":return p+1;case"MM":return u.s(p+1,2,"0");case"MMM":return H(t.monthsShort,p,S,3);case"MMMM":return H(S,p);case"D":return s.$D;case"DD":return u.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return H(t.weekdaysMin,s.$W,$,2);case"ddd":return H(t.weekdaysShort,s.$W,$,3);case"dddd":return $[s.$W];case"H":return String(d);case"HH":return u.s(d,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return j(d,h,!0);case"A":return j(d,h,!1);case"m":return String(h);case"mm":return u.s(h,2,"0");case"s":return String(s.$s);case"ss":return u.s(s.$s,2,"0");case"SSS":return u.s(s.$ms,3,"0");case"Z":return i}return null}(_)||i.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,s,t){var a,i=this,d=u.p(s),h=m(e),p=(h.utcOffset()-this.utcOffset())*b,$=this-h,S=function(){return u.m(i,h)};switch(d){case w:a=S()/12;break;case c:a=S();break;case l:a=S()/3;break;case v:a=($-p)/6048e5;break;case g:a=($-p)/864e5;break;case x:a=$/y;break;case C:a=$/b;break;case f:a=$/A;break;default:a=$}return t?a:u.a(a)},n.daysInMonth=function(){return this.endOf(c).$D},n.$locale=function(){return D[this.$L]},n.locale=function(e,s){if(!e)return this.$L;var t=this.clone(),a=Z(e,s,!0);return a&&(t.$L=a),t},n.clone=function(){return u.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},r}(),se=K.prototype;return m.prototype=se,[["$ms",B],["$s",f],["$m",C],["$H",x],["$W",g],["$M",c],["$y",w],["$D",Y]].forEach(function(r){se[r[1]]=function(n){return this.$g(n,r[0],r[1])}}),m.extend=function(r,n){return r.$i||(r(n,K,m),r.$i=!0),m},m.locale=Z,m.isDayjs=ee,m.unix=function(r){return m(1e3*r)},m.en=D[L],m.Ls=D,m.p={},m})})(ie);var Ce=ie.exports;const Oe=ce(Ce),Ae={class:"col-12"},Be={class:"form-group"},Ye=o("p",{class:"mg-b-10"},[q("年份 "),o("span",{class:"text-danger"},"*")],-1),Le=o("template",null,null,-1),Ne={class:"invalid-feedback"},He={class:"col-12"},je=o("span",{class:"input-group-text"},"%",-1),Ve={class:"col-12"},Re=o("span",{class:"input-group-text"},"%",-1),We={class:"col-12"},qe=o("span",{class:"input-group-text"},"%",-1),Ue={class:"col-12"},ze=o("span",{class:"input-group-text"},"%",-1),Ie={class:"col-12"},Ee=o("span",{class:"input-group-text"},"%",-1),Je={class:"col-12"},Pe={class:"col-12"},Ze={class:"btn-list text-center mt-5"},Ke=o("button",{class:"btn btn-md btn-primary",type:"submit"}," 確定 ",-1),Ge={__name:"FormModal",props:{reload:{type:Function,required:!0}},setup(I,{expose:E}){const A=ue(),b=I,y=te(null),B={year:"2024",healthFee:"",incomeTaxFive:"",incomeTaxFiveA:"",incomeTaxFiveB:"",incomeTaxNineA:"",basicSalary:"",incomeTax:""},f=te(null),C=le(()=>Fe(F(f))),{handleSubmit:x,resetForm:g,errors:v,defineField:c}=xe({initialValues:B,validationSchema:we().shape({})}),[l,w]=c("year"),Y=async k=>{k&&(console.log(k),f.value=k,g({values:{...k}})),y.value.show()},J=()=>{f.value=void 0,g({values:B,touched:!1})},P=x(async k=>{console.log(k),A.success("成功"),b.reload(),y.value.hide()}),Q=k=>Oe(k).format("YYYY");return E({show:Y}),(k,O)=>{const X=de("Datepicker");return ae(),he(Te,{ref_key:"modalRef",ref:y,title:C.value?"新增年份":"編輯年份","hide-footer":!0,"modal-hide":J},{default:M(()=>{var L;return[o("form",{class:"row",onSubmit:O[2]||(O[2]=fe((...D)=>F(P)&&F(P)(...D),["prevent"]))},[o("div",Ae,[o("div",Be,[Ye,T(X,me({"year-picker":"",locale:"zh-TW",format:Q,class:{"is-invalid border border-danger":!!F(v).year},modelValue:F(l),"onUpdate:modelValue":O[0]||(O[0]=D=>pe(l)?l.value=D:null)},F(w),{placeholder:"請選擇"}),{default:M(()=>[Le]),_:1},16,["class","modelValue"]),o("div",Ne,W((L=F(v))==null?void 0:L.year),1)])]),o("div",He,[T(V,{name:"healthFee",label:"健保補充費",type:"number",required:"",placeholder:"請輸入"},{iconRight:M(()=>[je]),_:1})]),o("div",Ve,[T(V,{name:"incomeTaxFive",label:"薪資所得稅(50)",type:"number",required:"",placeholder:"請輸入"},{iconRight:M(()=>[Re]),_:1})]),o("div",We,[T(V,{name:"incomeTaxFiveA",label:"執行業務所得(5A)",type:"number",required:"",placeholder:"請輸入"},{iconRight:M(()=>[qe]),_:1})]),o("div",Ue,[T(V,{name:"incomeTaxFiveB",label:"執行業務所得(5B)",type:"number",required:"",placeholder:"請輸入"},{iconRight:M(()=>[ze]),_:1})]),o("div",Ie,[T(V,{name:"incomeTaxNineA",label:"代扣所得稅(9A)",type:"number",required:"",placeholder:"請輸入"},{iconRight:M(()=>[Ee]),_:1})]),o("div",Je,[T(V,{name:"basicSalary",label:"補充保費基本薪資",required:"",type:"number",placeholder:"請輸入"})]),o("div",Pe,[T(V,{name:"incomeTax",label:"所得稅款",required:"",type:"number",placeholder:"請輸入"})]),o("div",Ze,[o("button",{class:"btn btn-md btn-outline-primary",type:"button",onClick:O[1]||(O[1]=D=>y.value.hide())}," 取消 "),Ke])],32)]}),_:1},8,["title"])}}},Qe={class:"row row-sm"},Xe={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},et={class:"card custom-card"},tt={class:"card-header border-bottom-0 pb-0"},nt={class:"row"},st={class:"col-12"},rt={class:"d-flex flex-column flex-lg-row justify-content-between"},at={class:"input-group wd-lg-25p"},it={class:"input-group-append"},ot={class:"card-body"},ct={class:"d-flex"},ut=["onClick"],lt=["onClick"],dt="參數設定",_t={__name:"index",setup(I){const{getConfigs:E,configList:A,pagination:b}=ke(),y=$e({keyword:"",sort:"desc",orderBy:"createDate"});ye(()=>{f(1)});const B=[{key:"year",label:"年份",sort:!0},{key:"healthFee",label:"健保補充費"},{key:"incomeTaxFive",label:"薪資所得稅(50)"},{key:"incomeTaxFiveA",label:"執行業務所得(5A)"},{key:"incomeTaxFiveB",label:"執行業務所得(5B)"},{key:"incomeTaxNineA",label:"代扣所得稅(9A)"},{key:"basicSalary",label:"補充保費基本薪資"},{key:"incomeTax",label:"所得稅款"},{key:"action",label:"Action"}],f=async(v=1,c=10)=>{let l={page:v,limit:c,...y};await E(l)},C=(v="createTime",c="desc")=>{y.orderBy=v,y.sort=c,f(1,b.value.size)},x=te(null),g=v=>{re.fire({title:"Are you sure?",text:`刪除年份「${v.year}」參數檔？`,type:"warning",showCancelButton:!0,confirmButtonText:"是的，確定刪除"}).then(async c=>{c.value&&(await f(A.value.length==1?1:b.value.current),re.fire("This Deleted!",`刪除年份「${v.year}」參數檔！`,"success"))})};return(v,c)=>(ae(),ve(Me,null,[T(Se,{title:dt}),o("div",Qe,[o("div",Xe,[o("div",et,[o("div",tt,[o("div",nt,[o("div",st,[o("div",rt,[o("div",at,[_e(o("input",{type:"text",class:"form-control",placeholder:"搜尋","onUpdate:modelValue":c[0]||(c[0]=l=>y.keyword=l),onKeyup:c[1]||(c[1]=ge(l=>f(1),["enter"]))},null,544),[[be,y.keyword]]),o("span",it,[o("button",{class:"btn btn-primary",type:"button",onClick:c[2]||(c[2]=l=>f(1))}," 搜尋 ")])]),o("button",{class:"btn btn-primary mt-2 mt-lg-0",onClick:c[3]||(c[3]=l=>x.value.show())},"新增年份")])])])]),o("div",ot,[T(De,{header:B,items:F(A),onChangePage:f,onOrderChange:C,pagination:F(b),orderBy:y.orderBy,sort:y.sort},{healthFee:M(({value:l})=>[q(W(l)+"% ",1)]),incomeTaxFive:M(({value:l})=>[q(W(l)+"% ",1)]),incomeTaxNineA:M(({value:l})=>[q(W(l)+"% ",1)]),basicSalary:M(({value:l})=>[q(W(l.toLocaleString()),1)]),incomeTax:M(({value:l})=>[q(W(l.toLocaleString()),1)]),action:M(({item:l})=>[o("div",ct,[o("button",{class:"btn btn-sm btn-danger me-2",type:"button",onClick:w=>g(l)},"刪除",8,ut),o("button",{class:"btn btn-sm btn-info me-2",type:"button",onClick:w=>x.value.show(l)},"修改",8,lt)])]),_:1},8,["items","pagination","orderBy","sort"])])])]),T(Ge,{ref_key:"formModalRef",ref:x,reload:()=>f(F(b).current,F(b).size)},null,8,["reload"])])],64))}};export{_t as default};
